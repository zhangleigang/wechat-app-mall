# AI面试助手小程序 - 需求文档

## 项目概述

AI面试助手是一款基于微信小程序的职业发展工具，旨在帮助求职者更好地准备技术面试。通过AI驱动的智能分析和精选的大数据技术知识库，为用户提供岗位分析、简历优化、面试知识学习和情绪支持等全方位服务。

## 术语表

- **小程序**: 微信小程序，运行在微信生态系统内的轻量级应用
- **AI服务**: 后端AI接口服务，提供智能对话和分析能力
- **知识库**: 结构化的大数据技术面试题库，包含HDFS、Spark、Flink等10个技术分类
- **Topic**: 知识主题，每个主题包含3-5个相关问题及答案
- **Session**: 会话，用户与AI的一次完整对话过程
- **apifm-wxapi**: 第三方API工厂SDK，提供用户管理等基础服务

---

## 功能需求

### FR-1: 岗位分析功能

**用户故事**: 作为求职者，我希望能够输入岗位JD并获得AI分析，以便了解岗位要求和准备面试

#### 验收标准

1. 当用户输入岗位JD或关键词时，系统应当调用AI服务进行分析
2. 当AI返回结果时，系统应当展示岗位职责概述、核心技能清单、常见面试问题和能力差距建议
3. 当用户发送消息时，系统应当保持会话历史，支持多轮对话
4. 当AI服务异常时，系统应当显示友好的错误提示
5. 当用户输入为空时，系统应当阻止发送请求

**优先级**: P0（核心功能）

---

### FR-2: 面试知识库功能

**用户故事**: 作为求职者，我希望能够浏览和搜索大数据技术面试题，以便系统性地学习和准备面试

#### 验收标准

1. 当用户进入知识库页面时，系统应当展示10个技术分类（HDFS、MapReduce、Yarn、Kafka、HBase、Hive、Spark、Flink、数据仓库、数据倾斜）
2. 当用户选择某个分类时，系统应当展示该分类下的所有主题及主题数量
3. 当用户输入搜索关键词时，系统应当实时过滤匹配的主题（匹配标题、摘要和标签）
4. 当用户点击某个主题时，系统应当跳转到详情页展示所有问题和答案
5. 当某个分类下没有主题时，系统应当显示"暂无匹配主题"提示

**数据要求**:
- 知识库数据存储在 `utils/knowledge.js` 文件中
- 每个分类包含 key（唯一标识）和 name（显示名称）
- 每个主题包含 id、title、summary、tags、categoryKey、faqs、answers、examples

**优先级**: P0（核心功能）

---

### FR-3: 简历解读功能

**用户故事**: 作为求职者，我希望能够上传简历并获得AI分析，以便优化简历内容和提升竞争力

#### 验收标准

1. 当用户点击上传按钮时，系统应当调起文件选择器
2. 当用户选择简历文件后，系统应当上传到AI服务并解析文本内容
3. 当解析成功时，系统应当将简历内容加入会话上下文
4. 当用户提问时，AI应当基于简历内容给出针对性建议（亮点、风险点、优化建议等）
5. 当上传失败时，系统应当显示错误提示并允许重试

**优先级**: P0（核心功能）

---

### FR-4: 情绪小屋功能

**用户故事**: 作为求职者，我希望能够与AI倾诉面试压力，以便获得情绪支持和压力管理建议

#### 验收标准

1. 当用户输入情绪相关内容时，AI应当以温暖、专业、不评判的方式回应
2. 当AI识别到压力来源时，应当提供呼吸练习、认知重构等具体建议
3. 当对话进行时，系统应当保持会话历史和上下文
4. 当用户需要时，AI应当提供可执行的练习清单

**优先级**: P1（重要功能）

---

### FR-5: 个人中心功能

**用户故事**: 作为用户，我希望能够管理个人信息和查看使用记录，以便个性化使用小程序

#### 验收标准

1. 当用户进入个人中心时，系统应当展示用户昵称、头像和基本信息
2. 当用户未登录时，系统应当显示登录按钮
3. 当用户点击头像时，系统应当支持修改头像
4. 当用户点击昵称时，系统应当支持修改昵称
5. 当用户登录时，系统应当使用微信授权自动登录

**优先级**: P1（重要功能）

---

## 非功能需求

### NFR-1: 性能要求

1. 页面首次加载时间应当小于2秒
2. AI响应时间应当小于10秒
3. 知识库搜索响应应当小于500毫秒
4. 页面切换动画应当流畅，无明显卡顿

### NFR-2: 可用性要求

1. 界面设计应当简洁直观，符合微信小程序设计规范
2. 错误提示应当清晰友好，指导用户如何解决问题
3. 所有交互应当有明确的视觉反馈（加载状态、按钮禁用等）
4. 支持搜索、筛选等常用操作

### NFR-3: 兼容性要求

1. 支持微信小程序基础库 2.0 及以上版本
2. 兼容 iOS 和 Android 平台
3. 适配不同屏幕尺寸（iPhone SE 到 iPad）

### NFR-4: 安全性要求

1. 所有API请求应当使用HTTPS协议
2. 用户Token应当安全存储在本地storage
3. 敏感信息（简历内容）不应当在本地长期存储
4. AI服务应当支持API密钥认证

### NFR-5: 可维护性要求

1. 代码应当遵循统一的编码规范
2. 关键功能应当有清晰的注释
3. 知识库数据应当易于更新和扩展
4. 配置项应当集中管理在 `config.js` 文件中

---

## 数据需求

### DR-1: 知识库数据结构

**分类数据结构**:
```javascript
{
  key: string,      // 分类唯一标识，如 'hdfs'
  name: string      // 分类显示名称，如 'HDFS'
}
```

**主题数据结构**:
```javascript
{
  id: string,           // 主题唯一标识，如 'hdfs-topic-1'
  title: string,        // 主题标题
  summary: string,      // 主题摘要（第一个问题）
  tags: string[],       // 标签数组
  categoryKey: string,  // 所属分类key
  faqs: string[],       // 问题列表
  answers: string[],    // 答案列表（与faqs一一对应）
  examples: any[]       // 示例代码或案例
}
```

**当前知识库统计**:
- 总分类数: 10个
- 总主题数: 43个
- 总问题数: 195个
- 各分类问题数: HDFS(17)、MapReduce(11)、Yarn(7)、Kafka(23)、HBase(15)、Hive(25)、Spark(36)、Flink(26)、数据仓库(30)、数据倾斜(5)

### DR-2: AI服务接口

**聊天接口**:
- 端点: `POST {ai_api_base}/chat`
- 请求体: `{ scene, sessionId, userId, token, messages }`
- 响应: `{ answer: string }`

**简历上传接口**:
- 端点: `POST {ai_api_base}/resume/upload`
- 请求: FormData with file
- 响应: `{ resumeText: string }`

---

## 约束条件

### C-1: 技术约束

1. 必须使用微信小程序原生框架开发
2. 必须使用 Vant Weapp 作为UI组件库
3. 必须使用 apifm-wxapi 作为用户管理SDK
4. AI服务地址和密钥需要在 `config.js` 中配置

### C-2: 平台约束

1. 必须遵守微信小程序平台规范
2. 必须提供隐私政策和用户协议
3. 必须通过微信小程序审核
4. 必须配置合法的服务器域名

### C-3: 业务约束

1. 知识库内容必须准确、专业
2. AI回复必须符合职业道德和法律法规
3. 用户数据必须安全保护，不得泄露

---

## 优先级说明

- **P0**: 核心功能，必须实现
- **P1**: 重要功能，应当实现
- **P2**: 增强功能，可选实现
- **P3**: 未来规划，暂不实现

---

## 变更历史

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|----------|------|
| 1.0 | 2024-11-13 | 初始版本，定义核心需求 | - |
| 1.1 | 2024-11-13 | 优化需求描述，增加数据结构和约束条件 | - |
