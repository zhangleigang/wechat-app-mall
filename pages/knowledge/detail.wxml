<view class="page">
  <view wx:if="{{!topic}}" class="empty">未获取到主题数据</view>
  <view wx:else>
    <view class="header">
      <text class="title">{{topic.title}}</text>
    </view>
    
    <!-- 问题和答案列表 -->
    <block wx:for="{{topic.faqs}}" wx:key="index" wx:for-item="question">
      <view class="section">
        <text class="sec-title">问题 {{index + 1}}</text>
        <view class="li question-item">• {{question}}</view>
        
        <!-- 生成答案按钮 -->
        <button class="generate-btn" 
                data-question-index="{{index}}" 
                bindtap="generateAnswer"
                disabled="{{generatingAnswer}}">
          {{generatingAnswer ? '生成中...' : '生成答案'}}
        </button>
        
        <!-- AI生成的答案 -->
        <view wx:if="{{generatedAnswers[index]}}" class="answer-container">
          <text class="answer-title">答案：</text>
          <view class="answer ai-answer">{{generatedAnswers[index]}}</view>
        </view>
        
        <!-- 原始答案（如果存在） -->
        <view wx:if="{{topic.answers && topic.answers[index]}}">
          <text class="answer-title">预设答案：</text>
          <view class="answer">{{topic.answers[index]}}</view>
        </view>
      </view>
    </block>
  </view>
</view>